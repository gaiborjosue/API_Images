<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VTK.js MRI Visualization</title>
  <style>
    body {
      background-color:#ffffff;
      margin: 0;
      padding: 0;
      height: 100%;
    }
  </style>
  <script type="module">
    import vtkJs from 'https://cdn.skypack.dev/vtk.js'
    import 'https://cdn.skypack.dev/vtk.js@29.0.0/Sources/favicon';

    import vtkXMLImageDataReader from 'https://cdn.skypack.dev/vtk.js@29.0.0/Sources/IO/XML/XMLImageDataReader';

    import vtkActor from 'https://cdn.skypack.dev/vtk.js@29.0.0/Sources/Rendering/Core/Actor';

    import vtkFullScreenRenderWindow from 'https://cdn.skypack.dev/vtk.js@29.0.0/Sources/Rendering/Misc/FullScreenRenderWindow';

    import vtkMapper from 'https://cdn.skypack.dev/vtk.js@29.0.0/Sources/Rendering/Core/Mapper';

    const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({
  background: [0, 0, 0],
});
    const renderWindow = fullScreenRenderWindow.getRenderWindow();
    const renderer = fullScreenRenderWindow.getRenderer();

    const actor = vtkActor.newInstance();
    const mapper = vtkMapper.newInstance();
    
    actor.setMapper(mapper);


    // Load VTI file
    const reader = vtkXMLImageDataReader.newInstance();

    reader
    .setUrl('test.vti')
    
    .then(() => {
      const imageData = reader.getOutputData();

      mapper.setInputData(imageData);
      renderer.resetCamera();
      renderWindow.render();

      // Log pixel data
      const dataArray = imageData.getPointData().getScalars();
      const pixelData = dataArray.getData();
      console.log(pixelData);
    });

    renderer.addActor(actor);
    renderer.getActiveCamera().set({ position: [1, 1, 0], viewUp: [0, 0, -1] });
    renderer.resetCamera();
    renderWindow.render();
  
  </script>
</head>
<body></body>
</html>
