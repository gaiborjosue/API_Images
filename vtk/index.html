<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VTK.js MRI Visualization</title>
  <style>
    body {
      background-color:#ffffff;
      margin: 0;
      padding: 0;
      height: 100%;
    }
  </style>
  <script type="module">
    import vtkJs from 'https://cdn.skypack.dev/vtk.js'
    import 'https://cdn.skypack.dev/vtk.js@29.0.0/Sources/favicon';

    import vtkXMLImageDataReader from 'https://cdn.skypack.dev/vtk.js@29.0.0/Sources/IO/XML/XMLImageDataReader';

    import vtkActor from 'https://cdn.skypack.dev/vtk.js@29.0.0/Sources/Rendering/Core/Actor';

    import vtkFullScreenRenderWindow from 'https://cdn.skypack.dev/vtk.js@29.0.0/Sources/Rendering/Misc/FullScreenRenderWindow';

    import vtkVolume from 'https://cdn.skypack.dev/vtk.js@29.0.0/Sources/Rendering/Core/Volume'

    import vtkVolumeMapper from 'https://cdn.skypack.dev/vtk.js@29.0.0/Sources/Rendering/Core/VolumeMapper';

    const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({
  background: [0, 0, 0],
});


    const renderWindow = fullScreenRenderWindow.getRenderWindow();
    const renderer = fullScreenRenderWindow.getRenderer();
    renderWindow.getInteractor().setDesiredUpdateRate(30);

    // Load VTI file
    const reader = vtkXMLImageDataReader.newInstance();


    const actor = vtkVolume.newInstance();
    const mapper = vtkVolumeMapper.newInstance();

    reader
    .setUrl('head-binary-zlib.vti')
    
    .then(function() {
      var imageData = reader.getOutputData();

      actor.setMapper(mapper);
      mapper.setInputData(imageData);

      // Log pixel data
      const dataArray = imageData.getPointData().getScalars();
      const pixelData = dataArray.getData();
      // console.log(imageData.getPointData().getScalars().getTuples(20, 400));

      
      console.log("Specific Value: ", imageData.getPointData().getArrays()[0].getValue(20000));
      console.log("Range: ", imageData.getPointData().getArrays()[0].getTuples(2, 400));
      // All 
      console.log("All the volume data: ", imageData.getPointData().getArrays()[0].getData())

    });

    

    renderer.addActor(actor);
    renderer.resetCamera();
    renderWindow.render();
  
  </script>
</head>
<body></body>
</html>
